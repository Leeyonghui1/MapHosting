<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>지도 생성하기</title>
    
</head>
<body>
<!-- 지도를 표시할 div 입니다 -->
<div id="map" style="width:100%;height:700px;"></div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=cc0ee8a78016cf2267b8b3850d5a3d71&libraries=services"></script>
<script>
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = { 
        center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
        level: 3, // 지도의 확대 레벨
        mapTypeId : kakao.maps.MapTypeId.ROADMAP // 지도 
    };

    // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
    var map = new kakao.maps.Map(mapContainer, mapOption);
    
    var marker = new kakao.maps.Marker(
        {
            position : new kakao.maps.LatLng(33.450701, 126.570667),
            map : map
        })
    
    function setCenter(lat, lng)
    {
        marker.setMap(null) // 마커 지움
        var mp = new kakao.maps.LatLng(lat,lng)
        map.setCenter(mp) // 지도 중심 이동
        marker = new kakao.maps.Marker( {position : mp} )
        marker.setMap(map) // 마커를 그림
    }
    
    function transXY(x, y){  
        var geocoder = new kakao.maps.services.Geocoder(), // 좌표계 변환 객체를 생성합니다
        wtmX = 374831.3967, // 변환할 WTM X 좌표 입니다
        wtmY = 470565.4638; // 변환할 WTM Y 좌표 입니다
        
        wtmX = x, // 변환할 WTM X 좌표 입니다
        wtmY = y; // 변환할 WTM Y 좌표 입니다
        console.log(wtmX, wtmY);
        
        geocoder.transCoord(wtmX, wtmY, transCoordCB, {
        input_coord: kakao.maps.services.Coords.WTM, // 변환을 위해 입력한 좌표계 입니다
        output_coord: kakao.maps.services.Coords.WGS84 // 변환 결과로 받을 좌표계 입니다 
    });
    }

    var geocoder = new kakao.maps.services.Geocoder(), // 좌표계 변환 객체를 생성합니다
        wtmX = 374831.3967, // 변환할 WTM X 좌표 입니다
        wtmY = 470565.4638; // 변환할 WTM Y 좌표 입니다
    
    console.log(wtmX, wtmY);
    
    // WTM 좌표를 WGS84 좌표계의 좌표로 변환합니다
    geocoder.transCoord(wtmX, wtmY, transCoordCB, {
        input_coord: kakao.maps.services.Coords.WTM, // 변환을 위해 입력한 좌표계 입니다
        output_coord: kakao.maps.services.Coords.WGS84 // 변환 결과로 받을 좌표계 입니다 
    });
    
 
    // 좌표 변환 결과를 받아서 처리할 콜백함수 입니다.
    function transCoordCB(result, status) {

        // 정상적으로 검색이 완료됐으면 
        if (status === kakao.maps.services.Status.OK) {
            setCenter(result[0].y, result[0].x)
        }
    }
</script>
</body>
</html>
